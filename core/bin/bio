#!/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby -W0
# -*- encoding: utf-8 -*-

$: << File.expand_path('../../lib', __FILE__)
require 'biosphere'
include Biosphere

Paths.biosphere_home = ENV['BIOSPHERE_HOME'] || File.expand_path('../../..', __FILE__)

if Runtime.privileged?
  Log.error 'I refuse to run with superuser privileges.'.red
  exit 99
end

begin
  Action.perform Runtime.arguments.dup
rescue Errors::Error => exception
  Log.debug "Exiting with status #{exception.code} defined by Error #{exception.class}"
  exit exception.code
end
